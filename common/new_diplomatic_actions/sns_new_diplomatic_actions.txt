add_to_soi = {
	category = great_powers

	require_acceptance = no

	is_visible = {
		OR = {
			AND = {
				has_dlc = "Rights of Man"
				is_great_power = yes
			}
			AND = {
				NOT = { has_dlc = "Rights of Man" }
				is_great_power_no_rom_trigger = yes
			}
		}
	}

	is_allowed = {
		FROM = {
			is_subject = no
			if = {
				limit = {
					has_dlc = "Rights of Man"
				}
				is_great_power = no
			}
			else = {
				NOT = { is_great_power_no_rom_trigger = yes }
			}
		}
		custom_trigger_tooltip = {
			tooltip = IS_SPHERE_INFLUENCING_FROM
			OR = {
				has_country_flag = is_influencing_@FROM
				FROM = {
					has_country_flag = influenced_by_@ROOT
				}
			}
		}
		check_variable = { influence_sphere = 100 }
	}

	on_accept = {
		create_subject = {
			subject = FROM
			subject_type = sphere
		}
	}
}

influence_nation = {
	category = great_powers

	require_acceptance = no

	is_visible = {
		OR = {
			AND = {
				has_dlc = "Rights of Man"
				is_great_power = yes
			}
			AND = {
				NOT = { has_dlc = "Rights of Man" }
				is_great_power_no_rom_trigger = yes
			}
		}
		NOT = { has_country_flag = is_influencing_@FROM }
		FROM = {
			NOT = { has_country_flag = influenced_by_@ROOT }
		}
	}

	is_allowed = {
		FROM = {
			is_subject = no
			if = {
				limit = {
					has_dlc = "Rights of Man"
				}
				is_great_power = no
			}
			else = {
				NOT = { is_great_power_no_rom_trigger = yes }
			}
		}
		custom_trigger_tooltip = {
			tooltip = IS_NOT_SPHERE_INFLUENCING_FROM
			NOT = { has_country_flag = is_influencing_@FROM }
			FROM = {
				NOT = { has_country_flag = influenced_by_@ROOT }
			}
		}
	}

	on_accept = {
		set_variable = { influence_sphere = 0 }
		set_country_flag = is_influencing_@FROM
		FROM = {
			set_country_flag = influenced_by_@ROOT
		}
	}
}

stop_influence_nation = {
	category = great_powers
	require_acceptance = no

	is_visible = {
		OR = {
			has_country_flag = is_influencing_@FROM
			FROM = {
				has_country_flag = influenced_by_@ROOT
			}
		}
	}

	is_allowed = {
		custom_trigger_tooltip = {
			tooltip = IS_SPHERE_INFLUENCING_FROM
			OR = {
				has_country_flag = is_influencing_@FROM
				FROM = {
					has_country_flag = influenced_by_@ROOT
				}
			}
		}
	}

	on_accept = {
		set_variable = { influence_sphere = 0 }
		clr_country_flag = is_influencing_@FROM
		FROM = {
			clr_country_flag = influenced_by_@ROOT
		}
	}
}